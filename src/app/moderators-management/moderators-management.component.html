<br><br>
<main>
<div id="users-container" class="container mt-4 p-4 rounded bg-primary text-light">
    <h1>{{ communityName }}'s</h1>
    <h2>MEMBERS</h2>

    <!-- Search & Filter -->
    <div class="d-flex justify-content-between align-items-center my-3">
        <input type="text" class="form-control w-50" placeholder="Search" [(ngModel)]="searchText">
        <button class="moderators-management-button" (click)="exitPage($event)">Go back</button>
        <select class="form-select w-25" [(ngModel)]="filter" (change)="filterMembers()">
          <option value="all">Everyone</option>
          <option value="moderator">Moderators</option>
          <option value="member">Members</option>
        </select>
      </div>
 
    <!-- User Cards -->
    @if (allMembers.length > 0) {
      @for (member of allMembers; track member.id) {
        <app-user-card
            [username]="member.username"
            [role]="moderators.includes(member) ? CommunityRole.MODERATOR : CommunityRole.MEMBER"
            (roleChanged)="updateRole(member.id, $event)"
        >
        </app-user-card>
      }
    } @else {
      <p class="d-flex align-items-center justify-content-center h-25 text-light fs-4">No members found</p>
    }
    
  </div>
</main>